import{d as n,X as t,Y as i,r as o,t as e,v as s,Z as l,z as a,C as r,$ as h,_ as d,a0 as c,i as f,c as p,I as u,B as m,a1 as w,g,a2 as v,a3 as b,a4 as y,a5 as _,a6 as x,a7 as k,R as $,a8 as S,a9 as M,aa as W,e as C,ab as E,H as z,J as B,P as A,K as F,x as N,ac as T,ad as U,ae as D,af as q,ag as I,N as L,ah as P,T as H,l as R,s as j,n as O,o as Y}from"./chunk.common_3c9697ce.esm.js";class J extends HTMLElement{constructor(){super();const n=document.createElement("template"),i=this.getAttribute("size"),o=this.getAttribute("background-color")||"#FFF";n.innerHTML=function(n=36,i){const[o,e,s]=t(i),l=`rgb(${o}, ${e}, ${s})`,a=1.15,r=n,h=Math.round(r/a);return`\n    <style>\n      .shop-swirl {\n        height: ${r}px;\n        width: ${h}px;\n        vertical-align: middle;\n      }\n    </style>\n    <svg class="shop-swirl" viewBox="0 0 22 25" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M9.43 0C4.607 0 2.2 1.63.266 2.952L.21 2.99a.476.476 0 0 0-.146.632l1.91 3.291a.486.486 0 0 0 .327.235.5.5 0 0 0 .398-.104l.15-.127c.995-.832 2.586-1.957 6.441-2.25 2.146-.174 4.005.404 5.372 1.666 1.503 1.386 2.4 3.626 2.4 5.991 0 4.348-2.56 7.084-6.68 7.14-3.391-.02-5.67-1.788-5.67-4.404 0-1.399.651-2.306 1.884-3.216a.437.437 0 0 0 .124-.554L4.995 8.03a.493.493 0 0 0-.685-.193C2.386 8.98.03 11.067.155 15.077c.156 5.111 4.403 9.009 9.921 9.168h.63C17.268 24.034 22 19.166 22 12.576 22.01 6.474 17.6 0 9.43 0z" fill="${l}" />\n    </svg>\n  `}(i?Number.parseInt(i,10):void 0,o),this.attachShadow({mode:"open"}).appendChild(n.content.cloneNode(!0))}}function V(){const n=document.createElement("div"),t=n.attachShadow({mode:"open"});return n.style.setProperty("all","initial"),{withInnerHTML(n){return t.innerHTML=n,this},build(){const o=i();return t.appendChild(o),document.body.appendChild(n),{get sheetModal(){return o},destroy(){n.remove()}}}}}var Q,K,G,X,Z,nn,tn,on,en,sn,ln,an,rn,hn,dn;const cn="shop-modal-content";class fn extends HTMLElement{constructor(){super(),Q.add(this),K.set(this,void 0),G.set(this,void 0),X.set(this,void 0),Z.set(this,void 0),nn.set(this,void 0),tn.set(this,void 0),on.set(this,void 0),en.set(this,void 0),sn.set(this,void 0),ln.set(this,void 0),an.set(this,{});const n=document.createElement("template");n.innerHTML=`\n    <style>\n      .${cn} {\n        border-bottom: 1px solid #D9D9D9;\n        padding-bottom: 20px;\n        text-align: center;\n        margin: 0 20px;\n      }\n\n      .${cn}--small {\n        padding-bottom: 7px;\n      }\n\n      .${cn}.hide-divider {\n        border-bottom-color: transparent;\n      }\n\n      .${cn}-title {\n        font-size: 20px;\n        font-weight: 600;\n        line-height: 25px;\n        letter-spacing: -0.2px;\n        color: #000000;\n        margin-bottom: 8px;\n      }\n\n      .${cn}-description {\n        font-size: 14px;\n        font-weight: 400;\n        color: #0F1721;\n        letter-spacing: 0px;\n      }\n\n      .${cn}-processing {\n        min-height: 97px;\n        margin: 0 20px;\n      }\n\n      .${cn}-processing-user {\n        padding: 15px 0;\n        min-height: 15px;\n        font-size: 12px;\n        color: #0F1721;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        -webkit-font-smoothing: antialiased;\n        -webkit-text-size-adjust: 100%;\n        font-family: -apple-system, BlinkMacSystemFont, San Francisco, Roboto, Segoe UI, Helvetica Neue, sans-serif !important;\n      }\n\n      .${cn}-disclaimer {\n        font-size: 12px;\n        line-height: 1.4;\n        text-align: center;\n        color: rgb(63, 69, 77);\n        padding: 8px 0 5px;\n        margin: 0 20px;\n      }\n\n      .${cn}-disclaimer a {\n        color: ${s.brand};\n        -webkit-appearance: none;\n        appearance: none;\n        text-decoration: none;\n        cursor: pointer;\n      }\n\n      .${cn}-disclaimer a:hover,\n      .${cn}-disclaimer a:focus,\n      .${cn}-disclaimer a:active {\n        outline: none;\n        color: #7b61f0;\n      }\n\n      @media (forced-colors: active) {\n        .${cn}.hide-divider {\n          border-bottom: none;\n        }\n      }\n\n      .hidden {\n        display: none;\n      }\n    </style>\n    <div class="${cn} hidden">\n      <h2 class="${cn}-title hidden"></h2>\n      <div class="${cn}-description hidden"></div>\n    </div>\n    <div class="${cn}-content hidden">\n      <div class="${cn}-processing hidden">\n        <div class="${cn}-processing-user"></div>\n        <div class="${cn}-processing-status"></div>\n      </div>\n      <div class="${cn}-children hidden">\n        <slot></slot>\n      </div>\n      <div class="${cn}-disclaimer hidden"></div>\n    </div>\n  `,o(this,K,this.attachShadow({mode:"open"}),"f"),e(this,K,"f").appendChild(n.content.cloneNode(!0)),o(this,G,e(this,K,"f").querySelector(`.${cn}`),"f"),o(this,X,e(this,K,"f").querySelector(`.${cn}-title`),"f"),o(this,Z,e(this,K,"f").querySelector(`.${cn}-description`),"f"),o(this,nn,e(this,K,"f").querySelector(`.${cn}-content`),"f"),o(this,tn,e(this,K,"f").querySelector(`.${cn}-processing`),"f"),o(this,on,e(this,K,"f").querySelector(`.${cn}-processing-user`),"f"),o(this,sn,e(this,K,"f").querySelector(`.${cn}-children`),"f"),o(this,ln,e(this,K,"f").querySelector(`.${cn}-disclaimer`),"f")}hideDivider(){e(this,G,"f").classList.add("hide-divider")}showDivider(){e(this,G,"f").classList.remove("hide-divider")}update(n){o(this,an,Object.assign(Object.assign({},e(this,an,"f")),n),"f"),e(this,Q,"m",rn).call(this),e(this,Q,"m",hn).call(this),e(this,Q,"m",dn).call(this)}}function pn(n,t=!1){const i=document.createElement("shop-modal-content");return t&&i.hideDivider(),i.update(n),i}K=new WeakMap,G=new WeakMap,X=new WeakMap,Z=new WeakMap,nn=new WeakMap,tn=new WeakMap,on=new WeakMap,en=new WeakMap,sn=new WeakMap,ln=new WeakMap,an=new WeakMap,Q=new WeakSet,rn=function(){const{title:n,description:t,authorizeState:i}=e(this,an,"f"),o=n||t;e(this,G,"f").classList.toggle("hidden",!o),e(this,X,"f").classList.toggle("hidden",!n),e(this,Z,"f").classList.toggle("hidden",!t),e(this,X,"f").textContent=n||"",e(this,Z,"f").textContent=t||"",i&&(e(this,G,"f").classList.toggle("hide-divider",i===l.Start),e(this,G,"f").classList.toggle(`${cn}--small`,i===l.Start))},hn=function(){var n;const{authorizeState:t,status:i,email:s}=e(this,an,"f"),h=Boolean(t||i),d=Boolean(i&&s),c=Boolean(h&&!d);if(e(this,nn,"f").classList.toggle("hidden",!h),e(this,tn,"f").classList.toggle("hidden",!d),e(this,sn,"f").classList.toggle("hidden",!c),!e(this,en,"f")&&d){const i=t===l.OneClick?a.Branded:a.Regular;o(this,en,r(i),"f"),e(this,tn,"f").appendChild(e(this,en,"f")),null===(n=e(this,en,"f"))||void 0===n||n.setStatus({status:"loading",message:""})}e(this,on,"f").textContent=s||""},dn=function(){const{disclaimer:n}=e(this,an,"f"),t=Boolean(n);e(this,ln,"f").classList.toggle("hidden",!t),e(this,ln,"f").innerHTML=n||""},customElements.get("shop-modal-content")||customElements.define("shop-modal-content",fn);const un="following";class mn extends HTMLElement{constructor(){super(),this.t=null,this.i=null,this.o=null,this.l=null,this.h=null,this.p=null,this.u=null,this.m=0,this.v=0,customElements.get("shop-logo")||customElements.define("shop-logo",h)}connectedCallback(){return d(this,void 0,void 0,(function*(){yield this._(),this.k()}))}setFollowing({following:n=!0,skipAnimation:t=!1}){var i,o,e,s,l;null===(i=this.i)||void 0===i||i.classList.toggle("button--animating",!t),null===(o=this.i)||void 0===o||o.classList.toggle("button--following",n),null!==this.h&&null!==this.p&&(this.h.ariaHidden=n?"true":"false",this.p.ariaHidden=n?"false":"true"),this.style.setProperty("--button-width",`${n?this.v:this.m}px`),window.matchMedia("(prefers-reduced-motion: reduce)").matches||t?null===(e=this.l)||void 0===e||e.setFilled(n):null===(l=null===(s=this.i)||void 0===s?void 0:s.querySelector(".follow-text"))||void 0===l||l.addEventListener("transitionend",(()=>{var t;null===(t=this.l)||void 0===t||t.setFilled(n)}))}setFocused(){var n;null===(n=this.i)||void 0===n||n.focus()}_(){return d(this,void 0,void 0,(function*(){try{const n="en",t={follow_on_shop:{follow:"Follow on {shop}",following:"Following on {shop}",auth_modal:{title:"Follow on Shop",description:"Stay in the know—never miss a sale, restock, or order update."},following_modal:{title:"Visit {store} on Shop",subtitle:"Everything you need to shop, track, and pay—all in one place.",qr_header:"Scan to visit {store} on the Shop app",qr_alt_text:"Shop app QR code",continue:"Continue"},completed:{title:"You're following {store}",subtitle:"We've sent you an email with a link to download the Shop app."},personalization_consent:{title:"To follow on Shop, sync your shopping activity"}},login_with_shop:{login:"Continue with {shop}",auth_modal:{login_title:"Sign in with Shop",login_title_with_store:"Sign in to {store} with Shop",login_description:"The easiest and most secure way to sign in to {store}—no password needed.",signup_title:"Create an account",signup_description:"Enter your phone number to create a Shop account.",login_sms_title:"Confirm it's you",login_sms_description:"Enter the code sent to {phoneNumber}",login_email_title:"Confirm it’s you",login_email_description:"Enter the code sent to your email, {email}",login_email_footer:"By continuing, your email address will be shared with {store}.",login_webauthn_title:"Confirm it’s you",login_webauthn_description:"Sign in with a passkey to securely use your saved information.",login_webauthn_footer:"By continuing, your email address will be shared with {store}."}},verified_email_auth:{auth_modal:{login_title:"Log in or sign up",signup_title:"Continue with Shop",signup_description:"Create a Shop account to sign in to {clientName}–no passwords needed"}},legal:{terms_of_service:"terms of service",privacy_policy:"privacy policy",terms:"terms",client:"See {clientName}’s {termsOfService} and {privacyPolicy}.",shop:"By continuing, you agree to Shop’s {termsOfService} and acknowledge the {privacyPolicy}.",authorized_scopes:{email:"By continuing, your email address will be shared with {store}.",email_name:"By continuing, your name and email address will be shared with {store}."}},customer_accounts:{remember_me:"Save my info securely with Shop to sign in faster everywhere",sign_up_page:{auth_modal:{login_title:"Continue with Shop",login_description:"Use your Shop account to sign in everywhere—no password needed.",login_sms_description:"Use your Shop account to sign in everywhere—no password needed.\r\n\r\nConfirm it's you, enter the code sent to {phoneNumber}",login_email_description:"Use your Shop account to sign in everywhere—no password needed.\r\n\r\nConfirm it's you, enter the code sent to your email, {email}"}}},payment_request:{auth_modal:{login_title:"Check out with Shop Pay",login_description:"Use your saved information to check out securely at {store}.",login_sms_title:"Confirm it's you",login_sms_description:"Enter the code sent to {phoneNumber} to securely use your saved information.",login_email_title:"Confirm it’s you",login_email_description:"Enter the code sent to your email, {email} to securely use your saved information."}}};this.u=new u({[n]:t})}catch(n){n instanceof Error&&m.notify(n)}return null}))}k(){var n,t,i,o;const e=document.createElement("template");if(e.innerHTML=`\n    <style>\n      @keyframes followBackground {\n        0% {\n          width: 100%;\n          height: 100%;\n          transform: scaleY(1);\n        }\n\n        25% {\n          transform: scaleY(1);\n        }\n\n        50% {\n          transform: scaleY(1.2);\n        }\n\n        100% {\n          transform: scaleY(1);\n          width: 37px;\n          height: 37px;\n        }\n      }\n\n      :host {\n        display: inline-block;\n        line-height: normal;\n\n        --following-text-color: #000000;\n        --border-color: #5433EB;\n        --border-hover-color: #7f68e9;\n        --parent-width: var(--reserved-width, 177px);\n\n        /* Reserve width to prevent layout shifts */\n        width: var(--parent-width);\n      }\n\n      .button {\n        border: none;\n        margin: 0;\n        padding: 0;\n        overflow: visible;\n        isolation: isolate;\n\n        background: transparent;\n        color: #ffffff;\n        font: 16px/19px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica;\n\n        line-height: normal;\n\n        -webkit-font-smoothing: inherit;\n        -moz-osx-font-smoothing: inherit;\n\n        -webkit-appearance: none;\n        position: relative;\n        display: inline-block;\n        align-items: center;\n\n        height: 37px;\n        width: var(--button-width, 100%);\n        border-radius: 48px;\n      }\n\n      .button:focus,\n      .button:focus-visible {\n        outline: none;\n      }\n\n      .button--dark {\n        --following-text-color: #ffffff;\n      }\n\n      .button--bordered {\n        --border-color: #EDEDED;\n        --border-hover-color: #EDEDED;\n      }\n\n      .follow-icon-wrapper {\n        display: flex;\n        align-items: center;\n        width: auto;\n        position: relative;\n        z-index: 1;\n        top: 0;\n        left: 0;\n      }\n\n      .follow-icon-wrapper:before {\n        content: '';\n        background: #5433EB;\n        border-radius: 48px;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        position: absolute;\n        z-index: -1;\n        transform-origin: center;\n        box-sizing: border-box;\n        border: 1px solid var(--border-color);\n      }\n\n      .button:not(.button--following):focus-visible .follow-icon-wrapper:before,\n      .button:not(.button--following):hover .follow-icon-wrapper:before {\n        background: #7f68e9;\n        border-color: var(--border-hover-color);\n      }\n\n      .follow-icon-wrapper shop-heart-icon {\n        position: absolute;\n        top: 11px;\n        left: 12px;\n      }\n\n      .follow-text,\n      .following-text {\n        white-space: nowrap;\n        padding: 9px 11px 9px 35px;\n        cursor: pointer;\n      }\n\n      .follow-text shop-logo,\n      .following-text shop-logo {\n        position: relative;\n        top: 3px;\n        padding-left: 1px;\n      }\n\n      .following-text {\n        opacity: 0;\n        pointer-events: none;\n        color: var(--following-text-color);\n        padding: 9px 8px 9px 43px;\n        position: absolute;\n        top: 0;\n        left: 0;\n        box-sizing: border-box;\n        overflow: hidden;\n        max-width: var(--button-width);\n      }\n\n      .following-icon {\n        opacity: 0;\n      }\n\n      .button--following .follow-icon-wrapper:before {\n        position: absolute;\n        width: 37px;\n        height: 37px;\n        padding: 0;\n      }\n\n      .button--following:focus-visible,\n      .button--following:hover {\n        background: rgb(217 217 217 / 0.2);\n      }\n\n      .button--following .follow-text,\n      .button--following .follow-icon {\n        opacity: 0;\n      }\n\n      .button--following .following-text {\n        opacity: 1;\n        width: auto;\n        pointer-events: auto;\n      }\n\n      .button--following .following-icon {\n        opacity: 1;\n      }\n\n      .button--following .follow-icon-wrapper shop-heart-icon {\n        transform: translateX(-1.5px);\n      }\n\n      @media (prefers-reduced-motion: no-preference) {\n        .button--animating {\n          transition: 400ms width cubic-bezier(0.45, 0, 0.15, 1);\n        }\n\n        .button--animating .follow-text {\n          transition: 200ms opacity cubic-bezier(0.45, 0, 1, 1);\n        }\n\n        .button--animating .following-text {\n          transition: 200ms opacity cubic-bezier(0, 0, 0.15, 1);\n          transition-delay: 0.2s;\n        }\n\n        .button--animating.button--following .follow-icon-wrapper:before {\n          animation: followBackground 0.4s cubic-bezier(0.45, 0, 0.15, 1);\n        }\n\n        .button--animating.button--following .follow-icon-wrapper shop-heart-icon {\n          transition: 400ms transform cubic-bezier(0.45, 0, 0.15, 1);\n        }\n      }\n    </style>\n    <button class="button">\n      <span class="follow-icon-wrapper">\n        <span class="follow-text">\n          <slot name="follow-text">\n            Follow on ${wn("white")}\n          </slot>\n        </span>\n      </span>\n\n      <span class="following-text" aria-hidden="true">\n        <slot name="following-text">\n          Following on ${wn("black")}\n        </slot>\n      </span>\n    </button>\n  `,this.t=this.attachShadow({mode:"open"}),this.t.appendChild(e.content.cloneNode(!0)),this.u){const n=this.u.translate("follow_on_shop.follow",{shop:wn("white")}),t=this.u.translate("follow_on_shop.following",{shop:wn("black")});this.t.querySelector('slot[name="follow-text"]').innerHTML=n,this.t.querySelector('slot[name="following-text"]').innerHTML=t}this.i=this.t.querySelector(".button"),this.o=this.i.querySelector(".follow-icon-wrapper"),this.h=null===(n=this.t)||void 0===n?void 0:n.querySelector("span.follow-text"),this.p=null===(t=this.t)||void 0===t?void 0:t.querySelector("span.following-text"),this.l=c(),this.o.prepend(this.l),this.m=(null===(i=this.t.querySelector(".follow-text"))||void 0===i?void 0:i.scrollWidth)||0,this.v=(null===(o=this.t.querySelector(".following-text"))||void 0===o?void 0:o.scrollWidth)||0,this.style.setProperty("--reserved-width",`${Math.max(this.m,this.v)}px`),this.setFollowing({following:this.hasAttribute(un),skipAnimation:!0}),this.$()}$(){var n,t;const i=f(this),o=p(i,"#ffffff")>p(i,"#000000"),e=p(i,"#5433EB")<=3.06;if(null===(n=this.i)||void 0===n||n.classList.toggle("button--dark",o),null===(t=this.i)||void 0===t||t.classList.toggle("button--bordered",e),o&&this.u){const n=this.u.translate("follow_on_shop.following",{shop:wn("white")});this.t.querySelector('slot[name="following-text"]').innerHTML=n}}}function wn(n){return`<shop-logo role="img" color=${n} size="15" style="display: inline-flex;" aria-label="Shop"></shop-logo>`}var gn,vn,bn,yn,_n,xn,kn,$n,Sn,Mn;customElements.get("follow-on-shop-button")||customElements.define("follow-on-shop-button",mn);const Wn="store-logo";class Cn extends HTMLElement{constructor(){super(),gn.add(this),vn.set(this,void 0),bn.set(this,void 0),yn.set(this,void 0),_n.set(this,void 0),xn.set(this,void 0),kn.set(this,void 0),$n.set(this,""),Sn.set(this,"");const n=document.createElement("template");n.innerHTML=`\n    <style>\n      @keyframes heartBeat {\n        0% {\n          transform: scale(1);\n        }\n\n        25% {\n          transform: scale(1.12);\n        }\n\n        50% {\n          transform: scale(0.9);\n        }\n\n        70% {\n          transform: scale(1);\n        }\n      }\n\n      :host {\n        display: flex;\n        justify-content: center;\n        font-family: -apple-system,San Francisco,Roboto,Segoe UI,Helvetica Neue,sans-serif !important;\n      }\n\n      .${Wn} {\n        display: inline-block;\n        position: relative;\n      }\n\n      .${Wn}-logo-wrapper {\n        width: 58px;\n        height: 58px;\n        border-radius: 100%;\n        background: linear-gradient(0deg, rgba(0, 0, 0, 0.04), rgba(0, 0, 0, 0.04)), #FFFFFF;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        position: relative;\n        overflow: hidden;\n        box-sizing: border-box;\n      }\n\n      .${Wn}-logo-wrapper--text {\n        background: ${s.foregroundSecondary};\n      }\n\n      .${Wn}-logo-wrapper--text img,\n      .${Wn}-logo-wrapper--image span {\n        display: none;\n      }\n\n      .${Wn}-logo-wrapper--text span,\n      .${Wn}-logo-wrapper--image img {\n        display: block;\n      }\n\n      .${Wn}-logo-wrapper img {\n        max-width: 100%;\n        max-height: 100%;\n        object-fit: contain;\n      }\n\n      .${Wn}-icon-wrapper {\n        position: absolute;\n        top: -16px;\n        left: 28px;\n        width: 36px;\n        height: 36px;\n        border-radius: 100%;\n        background: rgba(40, 40, 40, 0.3);\n        /* Note: backdrop-filter has minimal browser support */\n        -webkit-backdrop-filter: blur(24px);\n        backdrop-filter: blur(24px);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        box-sizing: border-box;\n      }\n\n      .${Wn}-text {\n        font-size: 28px;\n        line-height: 32px;\n        font-weight: 500;\n        color: ${s.white};\n        text-transform: capitalize;\n      }\n\n      .${Wn}--favorited .${Wn}-icon-wrapper {\n        background: ${s.brand};\n      }\n\n      @media (forced-colors: active) {\n        .${Wn}-logo-wrapper--text,\n        .${Wn}-icon-wrapper {\n          border: 1px solid;\n        }\n      }\n\n      @media (prefers-reduced-motion: no-preference) {\n        .${Wn}-icon-wrapper {\n          transition: background 0.1s 0.75s cubic-bezier(0.45, 0, 0.15, 1);\n        }\n\n        .${Wn}--favorited shop-heart-icon {\n          transform-origin: center;\n          animation: 0.4s cubic-bezier(0.45, 0, 0.15, 1) 0.75s heartBeat;\n        }\n      }\n    </style>\n    <div class="${Wn}">\n      <div class="${Wn}-logo-wrapper">\n        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z/C/HgAGgwJ/lK3Q6wAAAABJRU5ErkJggg==" alt="" class="${Wn}-image">\n        <span class="${Wn}-text"></span>\n      </div>\n      <div class="${Wn}-icon-wrapper"></div>\n    </div>\n  `,o(this,vn,this.attachShadow({mode:"open"}),"f"),e(this,vn,"f").appendChild(n.content.cloneNode(!0)),o(this,bn,e(this,vn,"f").querySelector(`.${Wn}`),"f"),o(this,yn,e(this,vn,"f").querySelector(`.${Wn}-logo-wrapper`),"f"),o(this,_n,e(this,yn,"f").querySelector("img"),"f"),o(this,xn,e(this,yn,"f").querySelector("span"),"f"),o(this,kn,c(),"f"),e(this,vn,"f").querySelector(`.${Wn}-icon-wrapper`).append(e(this,kn,"f"))}update({name:n,logoSrc:t}){o(this,$n,n||e(this,$n,"f"),"f"),o(this,Sn,t||e(this,Sn,"f"),"f"),e(this,gn,"m",Mn).call(this)}connectedCallback(){e(this,_n,"f").addEventListener("error",(()=>{o(this,Sn,"","f"),e(this,gn,"m",Mn).call(this)}))}setFavorited(){return e(this,bn,"f").classList.add(`${Wn}--favorited`),window.matchMedia("(prefers-reduced-motion: reduce)").matches?(e(this,kn,"f").setFilled(),Promise.resolve()):new Promise((n=>{e(this,kn,"f").addEventListener("animationstart",(()=>{e(this,kn,"f").setFilled()})),e(this,kn,"f").addEventListener("animationend",(()=>{setTimeout(n,1e3)}))}))}}var En,zn,Bn,An,Fn,Nn,Tn,Un,Dn,qn,In,Ln,Pn,Hn,Rn,jn,On,Yn,Jn,Vn,Qn,Kn,Gn,Xn,Zn,nt,tt,it,ot,et,st,lt,at,rt,ht,dt,ct,ft,pt,ut,mt,wt,gt,vt,bt,yt,_t;vn=new WeakMap,bn=new WeakMap,yn=new WeakMap,_n=new WeakMap,xn=new WeakMap,kn=new WeakMap,$n=new WeakMap,Sn=new WeakMap,gn=new WeakSet,Mn=function(){const n=e(this,$n,"f"),t=e(this,_n,"f").src;e(this,xn,"f").textContent=n.charAt(0),e(this,xn,"f").ariaLabel=n,e(this,Sn,"f")&&e(this,Sn,"f")!==t?(e(this,_n,"f").src=e(this,Sn,"f"),e(this,_n,"f").alt=n,e(this,yn,"f").classList.remove(`${Wn}-logo-wrapper--text`),e(this,yn,"f").classList.add(`${Wn}-logo-wrapper--image`)):e(this,Sn,"f")||(e(this,yn,"f").classList.remove(`${Wn}-logo-wrapper--image`),e(this,yn,"f").classList.add(`${Wn}-logo-wrapper--text`))},customElements.get(Wn)||customElements.define(Wn,Cn),function(n){n.Closed="closed",n.Mounting="mounting",n.Open="open"}(_t||(_t={}));const xt="shop_followed";class kt extends w{constructor(){super(),En.add(this),zn.set(this,void 0),Bn.set(this,g()),An.set(this,""),Fn.set(this,"2"),Nn.set(this,window.location.origin),Tn.set(this,!1),Un.set(this,new v({elementName:"shop-follow-button",analyticsTraceId:e(this,Bn,"f")})),Dn.set(this,void 0),qn.set(this,void 0),In.set(this,!1),Ln.set(this,null),Pn.set(this,void 0),Hn.set(this,void 0),Rn.set(this,void 0),jn.set(this,void 0),On.set(this,void 0),Yn.set(this,void 0),Jn.set(this,void 0),Vn.set(this,void 0),Qn.set(this,_t.Closed),Kn.set(this,void 0),Gn.set(this,void 0),Xn.set(this,void 0),Zn.set(this,null),nt.set(this,(()=>{e(this,En,"m",dt).call(this,!0)})),o(this,zn,this.attachShadow({mode:"open"}),"f"),o(this,In,"true"===b(xt),"f")}static get observedAttributes(){return[y,_,x,k]}attributeChangedCallback(n,t,i){switch(n){case _:o(this,Fn,i,"f"),e(this,En,"m",dt).call(this);break;case y:o(this,An,i,"f"),e(this,En,"m",dt).call(this);break;case x:o(this,Nn,i,"f"),$(e(this,Nn,"f"));break;case k:o(this,Tn,"true"===i,"f"),e(this,En,"m",dt).call(this)}}connectedCallback(){return d(this,void 0,void 0,(function*(){this.subscribeToHub(S.UserStatusIdentity,e(this,nt,"f")),yield e(this,En,"m",tt).call(this),e(this,En,"m",it).call(this),e(this,En,"m",ot).call(this)}))}disconnectedCallback(){var n,t,i,o;this.unsubscribeAllFromHub(),null===(n=e(this,Hn,"f"))||void 0===n||n.destroy(),null===(t=e(this,Dn,"f"))||void 0===t||t.disconnect(),null===(i=e(this,jn,"f"))||void 0===i||i.destroy(),null===(o=e(this,On,"f"))||void 0===o||o.destroy()}}zn=new WeakMap,Bn=new WeakMap,An=new WeakMap,Fn=new WeakMap,Nn=new WeakMap,Tn=new WeakMap,Un=new WeakMap,Dn=new WeakMap,qn=new WeakMap,In=new WeakMap,Ln=new WeakMap,Pn=new WeakMap,Hn=new WeakMap,Rn=new WeakMap,jn=new WeakMap,On=new WeakMap,Yn=new WeakMap,Jn=new WeakMap,Vn=new WeakMap,Qn=new WeakMap,Kn=new WeakMap,Gn=new WeakMap,Xn=new WeakMap,Zn=new WeakMap,nt=new WeakMap,En=new WeakSet,tt=function(){return d(this,void 0,void 0,(function*(){try{o(this,Zn,new u({["en"]:{follow_on_shop:{follow:"Follow on {shop}",following:"Following on {shop}",auth_modal:{title:"Follow on Shop",description:"Stay in the know—never miss a sale, restock, or order update."},following_modal:{title:"Visit {store} on Shop",subtitle:"Everything you need to shop, track, and pay—all in one place.",qr_header:"Scan to visit {store} on the Shop app",qr_alt_text:"Shop app QR code",continue:"Continue"},completed:{title:"You're following {store}",subtitle:"We've sent you an email with a link to download the Shop app."},personalization_consent:{title:"To follow on Shop, sync your shopping activity"}},login_with_shop:{login:"Continue with {shop}",auth_modal:{login_title:"Sign in with Shop",login_title_with_store:"Sign in to {store} with Shop",login_description:"The easiest and most secure way to sign in to {store}—no password needed.",signup_title:"Create an account",signup_description:"Enter your phone number to create a Shop account.",login_sms_title:"Confirm it's you",login_sms_description:"Enter the code sent to {phoneNumber}",login_email_title:"Confirm it’s you",login_email_description:"Enter the code sent to your email, {email}",login_email_footer:"By continuing, your email address will be shared with {store}.",login_webauthn_title:"Confirm it’s you",login_webauthn_description:"Sign in with a passkey to securely use your saved information.",login_webauthn_footer:"By continuing, your email address will be shared with {store}."}},verified_email_auth:{auth_modal:{login_title:"Log in or sign up",signup_title:"Continue with Shop",signup_description:"Create a Shop account to sign in to {clientName}–no passwords needed"}},legal:{terms_of_service:"terms of service",privacy_policy:"privacy policy",terms:"terms",client:"See {clientName}’s {termsOfService} and {privacyPolicy}.",shop:"By continuing, you agree to Shop’s {termsOfService} and acknowledge the {privacyPolicy}.",authorized_scopes:{email:"By continuing, your email address will be shared with {store}.",email_name:"By continuing, your name and email address will be shared with {store}."}},customer_accounts:{remember_me:"Save my info securely with Shop to sign in faster everywhere",sign_up_page:{auth_modal:{login_title:"Continue with Shop",login_description:"Use your Shop account to sign in everywhere—no password needed.",login_sms_description:"Use your Shop account to sign in everywhere—no password needed.\r\n\r\nConfirm it's you, enter the code sent to {phoneNumber}",login_email_description:"Use your Shop account to sign in everywhere—no password needed.\r\n\r\nConfirm it's you, enter the code sent to your email, {email}"}}},payment_request:{auth_modal:{login_title:"Check out with Shop Pay",login_description:"Use your saved information to check out securely at {store}.",login_sms_title:"Confirm it's you",login_sms_description:"Enter the code sent to {phoneNumber} to securely use your saved information.",login_email_title:"Confirm it’s you",login_email_description:"Enter the code sent to your email, {email} to securely use your saved information."}}}}),"f")}catch(n){n instanceof Error&&m.notify(n)}return null}))},it=function(){o(this,qn,function(n){const t=document.createElement("follow-on-shop-button");return n&&t.setAttribute(un,""),t}(e(this,In,"f")),"f"),e(this,zn,"f").innerHTML=M,e(this,zn,"f").appendChild(e(this,qn,"f"))},ot=function(){var n;e(this,En,"m",pt).call(this,e(this,In,"f")),e(this,En,"m",ut).call(this),$(e(this,Nn,"f")),null===(n=e(this,qn,"f"))||void 0===n||n.addEventListener("click",(()=>{var n;if(e(this,Tn,"f"))return o(this,In,!e(this,In,"f"),"f"),void(null===(n=e(this,qn,"f"))||void 0===n||n.setFollowing({following:e(this,In,"f")}));e(this,In,"f")?(e(this,Un,"f").trackFollowingGetAppButtonPageImpression(),W()?e(this,En,"m",st).call(this):e(this,En,"m",ht).call(this)):(e(this,Un,"f").trackFollowButtonClicked(),e(this,En,"m",et).call(this))}))},et=function(){e(this,Yn,"f")?e(this,Yn,"f").open():(o(this,Jn,e(this,En,"m",lt).call(this),"f"),o(this,Vn,pn({}),"f"),e(this,Vn,"f").append(e(this,En,"m",at).call(this)),o(this,jn,V().withInnerHTML(M).build(),"f"),o(this,Yn,e(this,jn,"f").sheetModal,"f"),e(this,Yn,"f").setAttribute(C,e(this,Bn,"f")),e(this,Yn,"f").appendChild(e(this,Jn,"f")),e(this,Yn,"f").appendChild(e(this,Vn,"f")),e(this,Yn,"f").addEventListener("modalcloserequest",e(this,En,"m",bt).bind(this)),o(this,Qn,_t.Mounting,"f"))},st=function(){var n,t,i;return d(this,void 0,void 0,(function*(){if(!e(this,Kn,"f")){o(this,On,V().withInnerHTML(M).build(),"f"),o(this,Kn,e(this,On,"f").sheetModal,"f"),e(this,Kn,"f").setAttribute("disable-popup","true");const s=yield e(this,En,"m",mt).call(this),l=null!==(n=null==s?void 0:s.name)&&void 0!==n?n:"the store",a=null===(t=e(this,Zn,"f"))||void 0===t?void 0:t.translate("follow_on_shop.following_modal.title",{store:l}),r=null===(i=e(this,Zn,"f"))||void 0===i?void 0:i.translate("follow_on_shop.following_modal.subtitle");o(this,Gn,pn({title:a,description:r},!0),"f"),e(this,Kn,"f").appendChild(e(this,Gn,"f")),e(this,Kn,"f").appendChild(yield e(this,En,"m",rt).call(this)),e(this,Kn,"f").addEventListener("modalcloserequest",(()=>d(this,void 0,void 0,(function*(){var n;e(this,Kn,"f")&&(yield e(this,Kn,"f").close()),null===(n=e(this,qn,"f"))||void 0===n||n.setFocused()})))),a&&e(this,Kn,"f").setAttribute("title",a)}e(this,Kn,"f").open(),e(this,Un,"f").trackFollowingGetAppButtonPageImpression()}))},lt=function(){const n=document.createElement(Wn);return e(this,En,"m",mt).call(this).then((t=>{n.update({name:(null==t?void 0:t.name)||"",logoSrc:(null==t?void 0:t.id)?`${E}/shops/${t.id}/logo?width=58`:""})})).catch((()=>{})),n},at=function(){var n;o(this,Pn,document.createElement("iframe"),"f"),e(this,Pn,"f").tabIndex=0,e(this,En,"m",dt).call(this);const t=(null===(n=this.ownerDocument)||void 0===n?void 0:n.defaultView)||void 0;return o(this,Hn,new z(new B(e(this,Pn,"f")),[A,F,e(this,Nn,"f")],e(this,En,"m",yt).bind(this),t),"f"),N(e(this,Pn,"f"),"allow","publickey-credentials-get *"),e(this,Pn,"f")},rt=function(){var n,t;return d(this,void 0,void 0,(function*(){const i=document.createElement("div"),o=yield e(this,En,"m",mt).call(this),s=null==o?void 0:o.id,l=null!==(t=null===(n=e(this,Zn,"f"))||void 0===n?void 0:n.translate("follow_on_shop.following_modal.continue",{defaultValue:"Continue"}))&&void 0!==t?t:"",a=s?`https://shop.app/sid/${s}`:"#";return i.innerHTML=T(a,l),i.addEventListener("click",(()=>d(this,void 0,void 0,(function*(){var n;e(this,Un,"f").trackFollowingGetAppButtonClicked(),null===(n=e(this,Kn,"f"))||void 0===n||n.close()})))),i}))},ht=function(){var n,t,i,s,l,a,r;return d(this,void 0,void 0,(function*(){if(!e(this,Xn,"f")){o(this,Xn,document.createElement("div"),"f"),e(this,Xn,"f").classList.add("fos-tooltip","fos-tooltip-hidden");const h=yield e(this,En,"m",mt).call(this),d=null!==(n=null==h?void 0:h.name)&&void 0!==n?n:"the store",c=null!==(i=null===(t=e(this,Zn,"f"))||void 0===t?void 0:t.translate("follow_on_shop.following_modal.qr_header",{store:d}))&&void 0!==i?i:"",f=null!==(l=null===(s=e(this,Zn,"f"))||void 0===s?void 0:s.translate("follow_on_shop.following_modal.qr_alt_text"))&&void 0!==l?l:"",p=null==h?void 0:h.id,u=p?`${E}/qr/sid/${p}`:"#";e(this,Xn,"f").innerHTML=U(c,u,f),null===(a=e(this,Xn,"f").querySelector(".fos-tooltip-overlay"))||void 0===a||a.addEventListener("click",(()=>{var n;null===(n=e(this,Xn,"f"))||void 0===n||n.classList.toggle("fos-tooltip-hidden",!0)})),null===(r=e(this,Xn,"f"))||void 0===r||r.addEventListener("click",(()=>{var n;null===(n=e(this,Xn,"f"))||void 0===n||n.classList.toggle("fos-tooltip-hidden",!0)})),e(this,zn,"f").appendChild(e(this,Xn,"f"))}e(this,Xn,"f").classList.toggle("fos-tooltip-hidden",!1)}))},dt=function(n){if(e(this,Pn,"f")){const t={clientId:e(this,An,"f")},i=D({version:e(this,Fn,"f"),analyticsTraceId:e(this,Bn,"f"),flow:q.Follow,oauthParams:t});e(this,En,"m",ct).call(this),N(e(this,Pn,"f"),"src",i,n),m.leaveBreadcrumb("Iframe url updated",{authorizeUrl:i},"state")}},ct=function(){e(this,En,"m",ft).call(this),o(this,Rn,setTimeout((()=>{const n=P.temporarilyUnavailable;this.dispatchCustomEvent("error",{message:n.message,code:n.code}),e(this,En,"m",ft).call(this)}),I),"f")},ft=function(){e(this,Rn,"f")&&(clearTimeout(e(this,Rn,"f")),o(this,Rn,void 0,"f"))},pt=function(n){e(this,Un,"f").trackFollowButtonPageImpression(n)},ut=function(){o(this,Dn,new IntersectionObserver((n=>{var t;for(const{isIntersecting:i}of n)i&&(null===(t=e(this,Dn,"f"))||void 0===t||t.disconnect(),e(this,Un,"f").trackFollowButtonInViewport())})),"f"),e(this,Dn,"f").observe(e(this,qn,"f"))},mt=function(){return d(this,void 0,void 0,(function*(){return e(this,Ln,"f")||o(this,Ln,yield L(e(this,Nn,"f")),"f"),e(this,Ln,"f")}))},wt=function({loggedIn:n,shouldFinalizeLogin:t}){var i,s,l,a;return d(this,void 0,void 0,(function*(){const r=new Date;r.setTime(r.getTime()+31536e6),document.cookie=`${xt}=true;expires=${r.toUTCString()};path=/`,n&&(t&&H(e(this,Nn,"f"),(n=>{m.notify(new Error(n))})),this.publishToHub(S.UserStatusIdentity)),yield null===(i=e(this,Jn,"f"))||void 0===i?void 0:i.setFavorited(),yield null===(s=e(this,Yn,"f"))||void 0===s?void 0:s.close(),null===(l=e(this,Hn,"f"))||void 0===l||l.destroy(),null===(a=e(this,qn,"f"))||void 0===a||a.setFollowing({following:!0}),o(this,In,!0,"f"),e(this,En,"m",pt).call(this,!0)}))},gt=function(n,t,i){e(this,En,"m",ft).call(this),this.dispatchCustomEvent("error",{code:n,message:t,email:i})},vt=function({clientName:n,logoSrc:t}){return d(this,void 0,void 0,(function*(){(n||t)&&e(this,Jn,"f").update({name:n,logoSrc:t}),e(this,Qn,"f")===_t.Mounting&&(e(this,Yn,"f").open(),o(this,Qn,_t.Open,"f"),e(this,En,"m",ft).call(this))}))},bt=function(){var n;return d(this,void 0,void 0,(function*(){e(this,Yn,"f")&&(yield e(this,Yn,"f").close()),null===(n=e(this,qn,"f"))||void 0===n||n.setFocused()}))},yt=function(n){var t,i,o,s;switch(n.type){case"loaded":e(this,En,"m",vt).call(this,n);break;case"resize_iframe":e(this,Pn,"f").style.height=`${n.height}px`,e(this,Pn,"f").style.width=`${n.width}px`;break;case"completed":e(this,En,"m",wt).call(this,n);break;case"error":e(this,En,"m",gt).call(this,n.code,n.message,n.email);break;case"content":null===(t=e(this,Yn,"f"))||void 0===t||t.setAttribute("title",n.title),null===(i=e(this,Vn,"f"))||void 0===i||i.update(n),null===(o=e(this,Jn,"f"))||void 0===o||o.classList.toggle("hidden",n.authorizeState===l.Captcha);break;case"processing_status_updated":null===(s=e(this,Vn,"f"))||void 0===s||s.update(n);break;case"close_requested":e(this,En,"m",bt).call(this)}},R()&&(j({bundle:"loginButton",bundleLocale:"en"}),O(),n("shop-follow-button",kt),Y(),n("shop-swirl",J));
//# sourceMappingURL=client.login-button_d40fc9ea.en.esm.js.map
